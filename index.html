<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="preload" href="./fonts/14717.otf" as="font" type="font/woff2" />
    <title>Moskvichev</title>
    <script>
      async function register() {
        const username = document.getElementById('reg-username').value;
        const password = document.getElementById('reg-password').value;
        const email = document.getElementById('reg-email').value;

        const response = await fetch('/register', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ username, password, email }),
        });

        const result = await response.text();
        alert(result);
      }

      async function login() {
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;

        const response = await fetch('/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ username, password }),
        });

        const result = await response.json();
        alert(result.token || 'Invalid credentials');
      }
    </script>
  </head>
  <body>
    <header class="main-header">
      <nav>
        <div class="hamburger-menu">
          <input id="menu__toggle" type="checkbox" />
          <label class="menu__btn" for="menu__toggle">
            <span></span>
          </label>

          <ul class="menu__box">
            <li><a class="menu__item" href="#">Main</a></li>
            <li><a class="menu__item" href="#">Projects</a></li>
            <li><a class="menu__item" href="#">News</a></li>
            <li><a class="menu__item" href="#">Blog</a></li>
            <li><a class="menu__item" href="#">Contacts</a></li>
          </ul>
        </div>
      </nav>
      <div class="search">
        <input type="text" class="input" placeholder="Search..." />
        <button class="reset">
          <div class="handle"></div>
        </button>
      </div>
      <div class="authorize">
        <h2>Регистрация</h2>
        <input type="text" id="reg-username" placeholder="Username" />
        <input type="password" id="reg-password" placeholder="Password" />
        <input type="email" id="reg-email" placeholder="Email" />
        <button onclick="register()">Зарегистрироваться</button>

        <h2>Вход</h2>
        <input type="text" id="login-username" placeholder="Username" />
        <input type="password" id="login-password" placeholder="Password" />
        <button onclick="login()">Войти</button>
      </div>
    </header>
    <main>
      <div class="cite-block">
        <blockquote>
          <p class="cite">"Success consists of going from failure to failure,</p>
          <p class="cite">without loss of enthusiasm."</p>
          <p class="winston">Winston Churchill</p>
        </blockquote>
      </div>
    </main>
    <footer class="main-footer"></footer>
  </body>
  <script src="script.js"></script>
  <script src="search.js"></script>
</html>
